<img width="468" height="35" alt="image" src="https://github.com/user-attachments/assets/cf8acc9c-1096-43df-8039-017b2f77fe71" />## Prepare the lab.
```
lab start auth-ldap
```

# You need to install and configure the LDAP 
```html
Name:               : ANISH-ldap-ex380
Bind DN (-D)        : cn=Directory Manager
Base DN             : cn=users, cn=accounts, dc=domain21, dc=example, dc=com
Server Hostname     : ldaps://rhds.ocp4.example.com/dc=example,dc=com?uid
Bind password (-w)  : redhatocp
Connection Protocol : ldaps
Insecure            : false
Mapping Method      :	claim

Attributes  â¬…ï¸ â¬…ï¸ ðŸ‘ˆðŸ‘ˆðŸ‘ˆðŸ‘ˆ
------------------------
Preferred username : uid
Email   : mail
ID      : dn
Name    : cn
```
## Once LDAP configured, user `kristendelgado` must able to login with password `redhat123`
- You should use 'secret' for `bind password` with name `ldap-bind-pass` in the `openshift-config` namespace.
- You must use 'configmap' for the `certificate` with name `ldap-ca-config` in the `openshift-config` namespace.
---


### Solution 
# Login by admin user
```
oc login -u admin -p redhatocp https://api.ocp4.example.com:6443
```
### Identify the URL for the OpenShift web console.
```
oc whoami --show-console
```
### For your references.
```
[student@workstation ~]$ oc whoami --show-console
https://console-openshift-console.apps.ocp4.example.com
```
### Take the backup.

```
oc get oauth cluster -o yaml
oc get oauth cluster -o yaml > oath.yaml
```

### Check the ConfigMap and Secret in the `openshift-config` namespace
```
oc -n openshift-config get cm,secret
```
```
oc -n openshift-config create configmap ldap-ca-config --from-file ca.crt=rhds_ca.crt 
oc -n openshift-config create secret generic ldap-bind-pass --from-literal bindPassword=redhatocp 
```
### Open the web console by click on `Red Hat Identity Management` and log in as the `admin` user with the `redhatocp` password.
### Click `Administration` â†’ `Cluster Settings` from the sidebar menu and then Click the `Configuration` tab



### If required, you can fallback the changes. 
```
oc replace -f oauth.yaml
```
```
watch oc get pods -n openshift-authentication
```
